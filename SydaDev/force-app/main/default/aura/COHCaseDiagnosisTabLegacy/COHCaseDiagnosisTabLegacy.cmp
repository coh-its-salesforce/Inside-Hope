<aura:component controller="COHCaseInsuranceTabControllerLegacy" implements="flexipage:availableForAllPageTypes,lightning:availableForFlowScreens,force:hasRecordId">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="mLoading" type="Boolean" default="true"/>
    <aura:attribute name="mCase" type="Case" default="{}"/>
    <aura:attribute name="mSelectListValues" type="Map" default=""/>
    <aura:attribute name="mWritable" type="Map" default=""/>
    <aura:attribute name="mDoneLoading" type="Boolean" default="false"/>
    <aura:attribute name="mCurCallCenterRep" type="String" default=""/>
    <aura:attribute name="mCallCenterRepList" type="List" default=""/>
    <aura:attribute name="mPatientDiagnosedVal" type="Boolean" default="false"/>
    <aura:attribute name="mPatientUndergoneTreatmentVal" type="Boolean" default="false"/>
    <aura:attribute name="mConfirmedThroughBiopsyVal" type="Boolean" default="false"/>
    <aura:attribute name="mCurrentlyUndergoingTreatmentVal" type="Boolean" default="false"/>
    <aura:attribute name="mShowSelectServiceLine" type="Boolean" default="false"/>
    <aura:attribute name="mShowSelectSpecialty" type="Boolean" default="false"/>
    <aura:attribute name="mShowSelectSubgroup" type="Boolean" default="false"/>
    <aura:attribute name="mShowSelectPhysician" type="Boolean" default="false"/>
    <aura:attribute name="mPhysicianChanged" type="Boolean" default="false"/>
    <aura:attribute name="mCancerStatusList" type="List" default=""/>
    <aura:attribute name="mHospiceStatusVal" type="String" default=""/>
    <aura:attribute name="mHospiceStatus" type="List" default=""/>
   
    <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title">Primary Diagnosis</span>
                </button>
            </h3>
            <aura:if isTrue="{!not(v.mLoading)}">
                <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
                    <div class="slds-form">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="callCenterRepList" name="callCenterRepList" label="Call Center Rep" value="{!v.mCurCallCenterRep}">
                                    <option text="--None--" value="" selected="{!v.mCurCallCenterRep == null}"/>
                                    <aura:iteration items="{!v.mCallCenterRepList}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{!v.mCurCallCenterRep == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select required="{!v.mCase.RecordType.DeveloperName == 'Patient_Referral_Services'}" aura:id="Patient_Type__c" label="Patient Type" name="Patient_Type__c" value="{!v.mCase.Patient_Type__c}">
                                    <option text="--None--" value="" selected="{#v.mCase.Patient_Type__c == null}"/>
                                    <aura:iteration items="{!v.mSelectListValues.Patient_Type__c}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Patient_Type__c == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
								<lightning:select aura:id="mPatientDiagnosed" name="mPatientDiagnosed" value = "{!v.mPatientDiagnosedVal}" label="Has patient been diagnosed?" onchange="{!c.onPatientDiagnosedChange}" required="false">
                                	<option value="false" selected="{!not(v.mCase.Has_patient_been_diagnosed_CheckBox__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Has_patient_been_diagnosed_CheckBox__c}">Yes</option>
								</lightning:select>
                            </div>                       
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
								<lightning:select aura:id="mConfirmedThroughBiopsy" name="mConfirmedThroughBiopsy" value = "{!v.mConfirmedThroughBiopsyVal}"  label="Confirmed Through Biopsy" required="false">
                                    <option value="false" selected="{!not(v.mCase.Confirmed_Through_Biopsy__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Confirmed_Through_Biopsy__c}">Yes</option>
								</lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:textarea aura:id="Patient_Diagnosis__c" name="Patient_Diagnosis__c" label="Primary Diagnosis" disabled="{!not(v.mPatientDiagnosedVal)}" maxlength="32768" />                                
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientUndergoneTreatment" name="mPatientUndergoneTreatment" value = "{!v.mPatientUndergoneTreatmentVal}"  onchange ="{!c.onChangePatientUndergoneTreamtment}" label="Has patient undergone treatment?" required="false">
                                    <option value="false" selected="{!not(v.mCase.Has_patient_undergone_treatment__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Has_patient_undergone_treatment__c}">Yes</option>
                                </lightning:select>
                            </div>                            
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mCurrentlyUndergoingTreatment" name="mCurrentlyUndergoingTreatment" value = "{!v.mCurrentlyUndergoingTreatmentVal}"  label="Currently Undergoing Treatment" required="false">
                                    <option value="false" selected="{!not(v.mCase.Currently_Undergoing_Treatment__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Currently_Undergoing_Treatment__c}">Yes</option>
                                </lightning:select>
                            </div>                            
                        </div>                            
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:select aura:id="Cancer_Status__c" label="Cancer Status" name="Cancer_Status__c" value="{!v.mCase.Cancer_Status__c}">
                                <option text="--None--" value="" selected="{#v.mCase.Cancer_Status__c == null}"/>
                                <aura:iteration items="{!v.mCancerStatusList}" var="i">
                                    <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Cancer_Status__c == i.value}"/>
                                </aura:iteration>
                            </lightning:select>
                            </div>                            
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mHospiceStatus" name="mHospiceStatus" label="Is patient currently admitted/on hospice?"  value="{!v.mHospiceStatusVal}" >
                                    <option text="--None--" value="" selected="{!v.mHospiceStatusVal == ''}"/>
                                    <aura:iteration items="{!v.mHospiceStatus}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Patient_Hospice_Status__c == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_2-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:textarea  aura:id="Patient_MD_Recommends__c" name="Patient_MD_Recommends__c" label="Patient MD Recommends"/>
                            </div>                            
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input aura:id="Referred_To_COH_MD__c" name="Referred_To_COH_MD__c" label="Referred To COH MD"/>
                            </div>                            
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <!--Changes made by Sanjay ** Date 07/24/20****Recordtype check** start -->
                                <aura:if isTrue="{!v.mCase.RecordType.DeveloperName != 'Patient_Referral_Services'}"   >
                                <!--**** Changes made by Sanjay ** Date 07/24/20****Recordtype check** END -->
                                    <lightning:select aura:id="SVC_Diagnosis_Case__c" label="SVC Diagnosis" name="SVC_Diagnosis_Case__c" value="{!v.mCase.SVC_Diagnosis_Case__c}">
                                    <option text="--None--" value="" selected="{#v.mCase.SVC_Diagnosis_Case__c == null}"/>
                                    <aura:iteration items="{!v.mSelectListValues.SVC_Diagnosis_Case__c}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.SVC_Diagnosis_Case__c == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                                </aura:if>
                               
                            </div>
                        </div>
                    </div>
                </div>   
                <h3 class="slds-section__title">
                    <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                        <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                        <span class="slds-truncate" title="Section Title">Physician Details</span>
                    </button>
                </h3>
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                        <lightning:select aura:id="Department_Case__c" label="Department" name="Department_Case__c" onchange="{!c.onDepartmentChange}" value="{!v.mCase.Department_Case__c}">
                            <option text="--None--" value="" selected="{#v.mCase.Department_Case__c == null}"/>
                            <aura:iteration items="{!v.mSelectListValues.Department_Case__c}" var="i">
                                <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Department_Case__c == i.value}"/>
                            </aura:iteration>
                        </lightning:select>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                        <lightning:select aura:id="Service_Line__c" disabled="{!not(v.mWritable.Service_Line__c)}" label="Service Line" name="Service_Line__c" onchange="{!c.onServiceLineChange}" value="{!v.mCase.Service_Line__c}">
                            <option text="--None--" value="" selected="{#v.mShowSelectServiceLine}"/>
                            <aura:iteration items="{!v.mSelectListValues.Service_Line__c}" var="i">
                                <option text="{#i.label}" value="{#i.value}" selected="{#(v.mCase.Service_Line__c == i.value &amp;&amp; not(v.mShowSelectServiceLine))}"/>
                            </aura:iteration>
                        </lightning:select>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                        <lightning:select aura:id="Specialty__c" disabled="{!not(v.mWritable.Specialty__c)}" label="Specialty" name="Specialty__c" onchange="{!c.onSpecialtyChange}" value="{!v.mCase.Specialty__c}">
                            <option text="--None--" value="" selected="{#v.mShowSelectSpecialty}"/>
                            <aura:iteration items="{!v.mSelectListValues.Specialty__c}" var="i">
                                <option text="{#i.label}" value="{#i.value}" selected="{#(v.mCase.Specialty__c == i.value  &amp;&amp; not(v.mShowSelectSpecialty))}"/>
                            </aura:iteration>
                        </lightning:select>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                        <lightning:select aura:id="Subgroup_Num__c" disabled="{!not(v.mWritable.Subgroup_Num__c)}" label="Subgroup No." name="Subgroup_Num__c" onchange="{!c.onSubgroupNumberChange}" value="{!v.mCase.Subgroup_Num__c}">
                            <option text="--None--" value="" selected="{#v.mShowSelectSubgroup}"/>
                            <aura:iteration items="{!v.mSelectListValues.Subgroup_Num__c}" var="i">
                                <option text="{#i.label}" value="{#i.value}" selected="{#(v.mCase.Subgroup_Num__c == i.value  &amp;&amp; not(v.mShowSelectSubgroup))}"/>
                            </aura:iteration>
                        </lightning:select>
                    </div>
                    <div class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:select aura:id="Physician_Decision_Tree__c" disabled="{!not(v.mWritable.Physician_Decision_Tree__c)}" label="Physician" name="Physician_Decision_Tree__c"  onchange="{!c.onPhysicianChange}" value="{!v.mCase.Physician_Decision_Tree__c}">
                                <option text="--None--" value="" selected="{#v.mShowSelectPhysician}"/>
                                <aura:iteration items="{!v.mSelectListValues.Physician_Decision_Tree__c}" var="i">
                                    <option text="{#i.label}" value="{#i.value}" selected="{#(v.mCase.Physician_Decision_Tree__c == i.value &amp;&amp; not(v.mShowSelectPhysician))}"/>
                                </aura:iteration>
                            </lightning:select>
                        </div>
                    </div>
                </div>
                <div class="slds-text-align_center">
                    <lightning:button aura:id="Save" label="Save Clinical Information" onclick="{!c.saveDiagnosisClick}" variant="brand"/>
                </div>
                <aura:set attribute="else">
                    <div style="height: 5rem;">
                        <lightning:spinner/>
                    </div>
                </aura:set>
            </aura:if>
        </div>
    </div>
</aura:component>