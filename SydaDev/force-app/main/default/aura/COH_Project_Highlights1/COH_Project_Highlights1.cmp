<aura:component implements="flexipage:availableForAllPageTypes,force:hasRecordId" controller="ITPM_LifeCycle_Tabs_Controller">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="Error" type="boolean" default="FALSE"/>
    <aura:attribute name="disabled" type="Boolean" default="false" />
    <aura:attribute name="saved" type="Boolean" default="false" />
    <aura:attribute name="viewScreen" type="boolean" default="true"/>
    <aura:attribute name="editScreen" type="boolean" default="FALSE"/>
    <aura:attribute name="link1" type="String"/>
    <aura:attribute name="ITPMObj" type="IT_Portfolio_Management__c" default=""/>
    <aura:attribute name="IT_Portfolio_Management__cRecord" type="Object"/>
    <!--<aura:attribute name="showSpinner" type="Boolean" default="true" />
    <aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner />
    </aura:if>-->
       
    <aura:if isTrue="{!!v.saved}">
        <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title"> Project Highlights </span>
                </button>
            </h3>
            
        <!--<aura:if isTrue="{!v.viewScreen}">-->
         
   <lightning:recordViewForm
            aura:id="ViewForm"
            recordId="{!v.recordId}"
                             objectApiName="IT_Portfolio_Management__c">
        	 <force:recordData 
                aura:id="recordLoader"
                recordId="{!v.recordId}"
                fields="Project_Schedule__c,
                        Project_Scope__c,
                        Project_Resources__c,
                        Project_Financial__c,
                        Remediation_Plan__c,
                        Overall_Project_Health__c,
                        Overall_Project_Health_Formula__c,
                        Project_Health_Explanation__c,
                        Project_Health_Explanation_Latest__c,
                        Phase1__c,
                        Activity_Type__c,
                        Project_Status1__c,
                        Project_Status__c,
                        Key_Issues__c,
                        Action_Plan__c,
                        Key_Risks__c,
                        Percentage_Completion__c,
                        Hours_Burned__c,
                        Hours_Burned_D__c,
                        Capex_Budget_Committed__c,
                        Opex_Budget_Committed__c,
                        Go_Live_Date__c,
                        Phase1__c,
                        Methodology__c,
                        Current_Status_Latest__c,
                        LastModifiedById,
                        Last_Modified_Date_Tim__c,
                        Plan_for_Next_Reporting_Period__c,
                        Overall_Project_Health_Formula_Text__c,ITS_Intake_Request__c,Current_Status_Accomplishments__c,
                        Activity_Type__c,DT_Project_Type__c,Remediation_Plan__c,Sharepoint_URL__c,Mitigation_Plan__c"
                targetFields="{!v.IT_Portfolio_Management__cRecord}"
                targetError="{!v.recordLoadError}"					
            />
                
				<div class="slds-p-around_large">
 
                        <div class="slds-grid">
                              <div class="slds-col--padded slds-large-size--6-of-12">
                                <fieldset class="slds-form-element">
                                    <legend class="slds-text-title_bold">Overall Health:</legend>
                                        <div class="slds-form-element__control"><div class="slds-p-left_small">
                                            <span class="slds-radio">
                                                <aura:if isTrue="{! v.IT_Portfolio_Management__cRecord.Overall_Project_Health_Formula_Text__c=='green'}">         
                                                    <span class="green11"></span><span></span>&nbsp;&nbsp;
                                                <!--<span class="yellow2"></span>&nbsp;&nbsp;
                                                    <span class="red2"></span>-->
                                                </aura:if>    
                                                <aura:if isTrue="{! v.IT_Portfolio_Management__cRecord.Overall_Project_Health_Formula_Text__c=='yellow'}"> 
                                                <!--<span class="green2"></span>&nbsp;&nbsp;-->
                                                    <span class="yellow11"></span><span></span>&nbsp;&nbsp;
                                                <!--<span class="red2"></span>-->
                                                </aura:if>
                                                <aura:if isTrue="{! v.IT_Portfolio_Management__cRecord.Overall_Project_Health_Formula_Text__c=='red'}"> 
                                                <!--<span class="green2"></span>&nbsp;&nbsp;
                                                <span class="yellow2"></span>&nbsp;&nbsp;-->
                                                <span class="red11"></span><span></span>
                                                </aura:if>    
                                            </span></div>
                                        </div>
                                </fieldset>
                            </div>
                            <!--Overall Project Health-->
                            <div class="slds-col--padded slds-large-size--6-of-12">
                                <fieldset class="slds-form-element">
                                    <legend class="slds-text-title_bold">Percent Complete:</legend>
                                    <aura:if isTrue="{!v.IT_Portfolio_Management__cRecord.Percentage_Completion__c == null}">
                                        <span>0</span>
                                    </aura:if>
                                    <aura:if isTrue="{!greaterthan(v.IT_Portfolio_Management__cRecord.Percentage_Completion__c, 100)}">
                                        <span style="color:Red;">
                                        	<ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Percentage_Completion__c}"/>%
                                    	</span>
                                    	<aura:set attribute="else">
                                        	<span>
                                    			<ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Percentage_Completion__c}" />%
                                			</span>
                                    	</aura:set>
                                	</aura:if>
                                       <!-- <div class="slds-form-element__control">
                                            <span>
                                                <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Percentage_Completion__c}"/>%
                                            </span>
                                        </div> -->
                                </fieldset>
                            </div>
                            <!-- Phase -->
                            
                            
                        </div><br/><br/>
           			<div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Health Explanation: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont">
                                    <ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Project_Health_Explanation_Latest__c}"/>
                                </span>
                            </div>
                        </div>
                        <div class="slds-col--padded slds-large-size--6-of-12">
                            <fieldset class="slds-form-element">
                                <legend class="slds-text-title_bold">% Hours Burned:</legend>
                                <aura:if isTrue="{!v.IT_Portfolio_Management__cRecord.Hours_Burned__c == null}">
                                    <span>0</span>
                                </aura:if>
                                <aura:if isTrue="{!greaterthan(v.IT_Portfolio_Management__cRecord.Hours_Burned__c, 100)}">
                                    <span style="color:Red;">
                                        <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Hours_Burned__c}"/>%
                                    </span>
                                    <aura:set attribute="else">
                                        <span>
                                            <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Hours_Burned__c}" />%
                                        </span>
                                    </aura:set>
                                </aura:if>
                            </fieldset>
                        </div> 
                    </div>
                    <br/><br/>
                            <div class="slds-grid">
                                <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Current Status/Accomplishments:</span>
                                <div class="slds-form-element__control">                             
                                    <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Current_Status_Latest__c}" /></span></div></div>
                                
                                <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Go-Live Date: </span>
                                    <div class="slds-form-element__control">
                                        <span class="valueFont"><ui:outputDate value="{!v.IT_Portfolio_Management__cRecord.Go_Live_Date__c}" format="MM/dd/yyyy"/></span></div></div>
                            </div><br/><br/>
                    
                    <div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Planned Activities (Next Period):</span><div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Plan_for_Next_Reporting_Period__c}"/></span></div></div>
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Methodology: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Methodology__c}"/></span></div></div>
                    </div><br/><br/>
                    <div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12"></div>
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Phase: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Activity_Type__c}"/></span></div></div>
                    </div><br/><br/>
                    <div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Key Issues: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Key_Issues__c}"/></span></div></div>
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Remediation Plan: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Remediation_Plan__c}"/></span></div></div>
                    </div><br/><br/>
                    
                    <div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Key Risks: </span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Key_Risks__c}"/></span></div></div>
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Mitigation Plan:</span>
                            <div class="slds-form-element__control">
                                <span class="valueFont"><ui:outputText value="{!v.IT_Portfolio_Management__cRecord.Mitigation_Plan__c}"/></span></div></div>
                            </div><br/><br/>
                    
                    <div class="slds-grid">
                        <div class="slds-col--padded slds-large-size--6-of-12">
                            <span class="slds-text-title_bold">% Capex Budget Committed: </span>
                            <div class="slds-form-element__control">
                                <aura:if isTrue="{!v.IT_Portfolio_Management__cRecord.Capex_Budget_Committed__c == null}">
                                        <span>0</span>
                                </aura:if>
                                <aura:if isTrue="{!greaterthan(v.IT_Portfolio_Management__cRecord.Capex_Budget_Committed__c, 100)}">
                                    <span style="color:Red;">
                                        <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Capex_Budget_Committed__c}" />%
                                    </span>
                                    <aura:set attribute="else">
                                        <span>
                                            <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Capex_Budget_Committed__c}" />%
                                        </span>
                                    </aura:set>
                                </aura:if>
                               <!-- <span class="valueFont">
                                    <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Capex_Budget_Committed__c}"/>%
                                </span> -->
                            </div>
                        </div>
                        <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">% Opex Budget Committed:</span>
                            <div class="slds-form-element__control">
                                <aura:if isTrue="{!v.IT_Portfolio_Management__cRecord.Opex_Budget_Committed__c == null}">
                                        <span>0</span>
                                </aura:if>
                                <aura:if isTrue="{!greaterthan(v.IT_Portfolio_Management__cRecord.Opex_Budget_Committed__c, 100)}">
                                    <span style="color:Red;">
                                        <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Opex_Budget_Committed__c}" />%
                                    </span>
                                    <aura:set attribute="else">
                                        <span>
                                            <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Opex_Budget_Committed__c}" />%
                                        </span>
                                    </aura:set>
                                </aura:if>
                               <!-- <span class="valueFont">
                                    <ui:outputNumber value="{!v.IT_Portfolio_Management__cRecord.Opex_Budget_Committed__c}"/>%
                                </span> -->
                            </div></div>
                            </div><br/><br/>
                            <div class="slds-grid">
                                <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Last Health and Status Update: </span>
                                    <div class="slds-form-element__control">
                                        <span class="valueFont"><ui:outputDate value="{!v.IT_Portfolio_Management__cRecord.Current_Status_Accomplishments__c}" format="MM/dd/yyyy"/></span></div></div>
                                <div class="slds-col--padded slds-large-size--6-of-12"><span class="slds-text-title_bold">Sharepoint URL: </span>
                                    <div class="slds-form-element__control">
                                        <span class="valueFont"> 
                                            <span class="slds-truncate">
                                                <aura:if isTrue="{!not(empty(v.link1))}">
                                                	<a href="{!v.link1}"  target="_blank">Launch Sharepoint URL</a>
                                                </aura:if>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </div><br/><br/>
                          
            
            
            <!--<center>
            	<div class="slds-m-top_medium">
                
                <lightning:button disabled="{!v.disabled}" variant="brand" type="Edit" name="Edit Project Highlights" label="Edit Status Summary" onclick="{!c.handleEdit}"/>
            	</div>
            </center>-->
                    </div>
            </lightning:recordViewForm>
            <!--</aura:if>-->
            
      
        <aura:set attribute="else">
            <p>Saved!</p>
        </aura:set>
        
        </div>
        </div>
    </aura:if>       
</aura:component>