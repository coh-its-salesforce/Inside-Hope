<aura:component controller="COHCaseInsuranceTabController" implements="flexipage:availableForAllPageTypes,lightning:availableForFlowScreens,force:hasRecordId">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="mCase" type="Case" default="{}"/>
    <aura:attribute name="mDoneLoading" type="Boolean" default="false"/>
    <aura:attribute name="mWritable" type="Map" default=""/>
    <aura:attribute name="mSelectListValues" type="Map" default=""/>
    <aura:attribute name="mLOARequiredVal" type="Boolean" default="false"/>
    <aura:attribute name="mAuthRequiredVal" type="Boolean" default="false"/>
    
    <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title">Patient Insurance</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
                <aura:if isTrue="{!v.mDoneLoading}">
                    <div class="slds-form">
                        <div class="slds-form">
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Plan_Type__c" label="Plan Type" name="Plan_Type__c" onchange="{!c.onPlanTypeChange}" value="{!v.mCase.Plan_Type__c}">
                                        <option text="--None--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Plan_Type__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Plan_Type__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Line_of_Business_Decision_Tree__c"  label="Line of Business" name="Line_of_Business_Decision_Tree__c"  onchange="{!c.onLineOfBusinessChange}" value="{!v.mCase.Line_of_Business_Decision_Tree__c}">
                                        <option text="--None--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Line_of_Business_Decision_Tree__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Line_of_Business_Decision_Tree__c == i.value}"/> 
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Health_Plan__c"  label="Health Plan" name="Health_Plan__c" onchange="{!c.onHealthPlanChange}" value="{!v.mCase.Health_Plan__c}">
                                        <option text="--None--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Health_Plan__c}" var="i">
                                            <option text="{!i.label}" value="{!i.value}" selected="{#v.mCase.Health_Plan__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Medical_Group_IPA__c"  label="Medical Group / IPA" name="Medical_Group_IPA__c" onchange="{!c.onMedicalGroupIPAChange}" value="{!v.mCase.Medical_Group_IPA__c}">
                                        <option text="--None--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Medical_Group_IPA__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Medical_Group_IPA__c == i.value}"/> 
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Duarte_or_Community__c" disabled="{!not(v.mWritable.Duarte_or_Community__c)}" label="Duarte or Community" name="Duarte_or_Community__c" onchange="{!c.onLocationChange}" value="{!v.mCase.Duarte_or_Community__c}">
                                        <option text="--None--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Duarte_or_Community__c}" var="i">
                                            <option text="{!i.label}" value="{!i.value}" selected="{#v.mCase.Duarte_or_Community__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="mAuth_Required__c" name="mAuth_Required__c" value="{!v.mAuthRequiredVal}" disabled="{!not(v.mWritable.Auth_Required__c)}"  label="Auth Required?"  required="false">
                                        <option value="false"  selected="{!not(v.mCase.Auth_Required__c)}">No</option>
                                        <option value="true" selected="{!v.mCase.Auth_Required__c}">Yes</option>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:input aura:id="Auth_Recieved__c" type="checkbox" name="Auth_Recieved__c" label="Auth Recieved" checked="{!v.mCase.Auth_Received__c}"/>
                                </div>                            
                            </div>                            
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="mLOA_Required__c" name="mLOA_Required__c" value="{!v.mLOARequiredVal}" disabled="{!not(v.mWritable.LOA_Required__c)}"  label="LOA Required?"  required="false">
                                        <option value="false"  selected="{!not(v.mCase.LOA_Required__c)}">No</option>
                                        <option value="true" selected="{!v.mCase.LOA_Required__c}">Yes</option>
                                    </lightning:select>
                                </div>                            
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:input aura:id="LOA_Complete__c" type="checkbox" name="LOA_Complete__c" label="LOA Complete" checked="{!v.mCase.LOA_Complete__c}"/>
                                </div>                            
                            </div>                            
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="mInsurance_Verified__c" name="mInsurance_Verified__c"  label="Insurance Verified?"  required="false">
                                        <option value="false"  >No</option>
                                        <option value="true" selected="{!v.mCase.Insurance_Verified__c}">Yes</option>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:input aura:id="Auth_Follow_Up_Complete__c" label="Financial Clearance Complete" name="Auth_Follow_Up_Complete__c" type="date" value="{!v.mCase.Auth_Follow_Up_Complete__c}"/>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:input aura:id="Auth__c" label="Auth No." name="Auth__c" value="{!v.mCase.Auth__c}"/>
                                </div>
                            </div>                                                        
                            <div class="slds-grid slds-wrap">                            
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:textarea aura:id="Auth_Insurance_Notes__c" label="Auth. / Insurance Notes" name="Auth_Insurance_Notes__c" value="{!v.mCase.Auth_Insurance_Notes__c}"/>
                                </div>                            
                            </div>                        
                        </div>
                    </div>
                    <aura:set attribute="else">
                        <div style="height: 5rem;">
                            <lightning:spinner/>
                        </div>
                    </aura:set>
                </aura:if>               
            </div>   
            <div class="slds-text-align_center slds-p-top_small">
                <lightning:button aura:id="Save" label="Save Patient Insurance" variant="brand" onclick="{!c.onSave}" />
            </div>     
        </div>
    </div>
</aura:component>