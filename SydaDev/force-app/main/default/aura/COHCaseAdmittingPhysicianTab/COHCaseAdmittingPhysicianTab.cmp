<aura:component implements="flexipage:availableForAllPageTypes,force:hasRecordId" controller="COHCasePhysicianTabController">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="mCase" type="Case" default=""/>
    <aura:attribute name="mSelectListValues" type="Map" default=""/>
    <aura:attribute name="mWritable" type="Map" default=""/>
    <aura:attribute name="mDoneLoading" type="Boolean" default="false"/>
    
    <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title">Physician &amp; Appointment Details</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
                <aura:if isTrue="{!v.mDoneLoading}">
                    <lightning:recordEditForm aura:id="admittingPhysicianForm" objectApiName="Case" onerror="{!c.handleError}" onsubmit="{!c.handleSubmit}" onsuccess="{!c.handleSuccess}" recordId="{!v.recordId}" recordTypeId="0120V000002235RQAQ">
                        <div class="slds-form">
                            <div class="slds-grid slds-wrap">
                                <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:inputField fieldName="Accepting_MD__c" value="{!v.mCase.Accepting_MD__c}"/>
                                </div>
                                <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:inputField fieldName="Attending_MD__c" value="{!v.mCase.Attending_MD__c}"/>
                                </div>
                                <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:inputField fieldName="Admitting_Team__c"/>
                                </div>
                                <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:inputField fieldName="HEM_Team__c"/>
                                </div>                                
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Department_Case__c" label="Department" name="Department_Case__c" onchange="{!c.onDepartmentChange}" value="{!v.mCase.Department_Case__c}">
                                        <option text="--Select--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Department_Case__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Department_Case__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Service_Line__c" disabled="{!not(v.mWritable.Service_Line__c)}" label="Service Line" name="Service_Line__c" onchange="{!c.onServiceLineChange}" value="{!v.mCase.Service_Line__c}">
                                        <option text="--Select--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Service_Line__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Service_Line__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Specialty__c" disabled="{!not(v.mWritable.Specialty__c)}" label="Specialty" name="Specialty__c" onchange="{!c.onSpecialtyChange}" value="{!v.mCase.Specialty__c}">
                                        <option text="--Select--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Specialty__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Specialty__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                    <lightning:select aura:id="Physician_Decision_Tree__c" disabled="{!not(v.mWritable.Physician_Decision_Tree__c)}" label="Physician" name="Physician_Decision_Tree__c" value="{!v.mCase.Physician_Decision_Tree__c}">
                                        <option text="--Select--" value=""/>
                                        <aura:iteration items="{!v.mSelectListValues.Physician_Decision_Tree__c}" var="i">
                                            <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Physician_Decision_Tree__c == i.value}"/>
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            <div class="slds-text-align_center slds-p-top_small">
                                <lightning:button aura:id="saveBtn" label="Save Physician" type="submit" variant="brand"/>
                            </div>
                        </div>
                    </lightning:recordEditForm> 
                    <aura:set attribute="else">
                        <div style="height:5rem;">
                            <lightning:spinner/>
                        </div>
                    </aura:set>
                </aura:if>
            </div>
        </div>       
    </div>
</aura:component>