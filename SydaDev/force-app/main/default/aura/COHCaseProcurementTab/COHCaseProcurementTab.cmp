<aura:component controller="COHCaseInsuranceTabController" implements="flexipage:availableForAllPageTypes,force:hasRecordId">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="mCase" type="Case" default="{}"/>
    <aura:attribute name="mClinicalSpecialtyAssignmentVal" type="String"/>
    <aura:attribute name="mLoading" type="boolean" default="true"/>
    <aura:attribute name="mCurPRSpecialist" type="String" default=""/>
    <aura:attribute name="mAllRecordsReceivedVal" type="Boolean" default="false"/>
    <aura:attribute name="mRecordsNoLongerNeededVal" type="Boolean" default="false"/>
    <aura:attribute name="mInsuranceCardVal" type="Boolean" default="false"/>
    <aura:attribute name="mNewPatientPacketVal" type="Boolean" default="false"/>
    <aura:attribute name="mMedicationsVal" type="Boolean" default="false"/>
    <aura:attribute name="mPhiReceievedlstVal" type="String"/>
    <aura:attribute name="mPhiUploadedtoeHealthvVal" type="String"/>
    <aura:attribute name="mPatienteHandedofftoeHealthVal" type="String"/>
    <aura:attribute name="mPatienteRADImagingNeededVal" type="String" />
    <aura:attribute name="mPatientePathologySlidesNeededVal" type="String"/>
    <aura:attribute name="mPatienteAncillaryReqEnteredVal" type="String"/>
    <aura:attribute name="mPatientePathologyReqEnteredVal" type="String"/>
    <aura:attribute name="mPatienteHealthTemplateSubmittedVal" type="String"/>
    <aura:attribute name="mPatienteHealthTemplate" type="String"/>
    <aura:attribute name="mRADImagingNeeded" type="String"/>
    <aura:attribute name="mPathologySlidesNeeded" type="String"/>
    <aura:attribute name="PRSpecialist_AssignmentMap" type="Map"/>
    <aura:attribute name="eHealth_Record_TemplateMap" type="Map"/>
    <lightning:empApi aura:id="empApi" />
    <ltng:require styles="{!$Resource.multilineToastCSS}" />
    
    <aura:attribute name="ApptDateTime" type="Datetime" /> <!-- Added by vara on 06-14-2022 NPI Issue log:124 -->
    <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title">Patient Records</span>
                </button>
            </h3>
           <!-- <lightning:recordEditForm aura:id="procurementForm" recordId="{!v.recordId}" objectApiName="Case" onload="{!c.onRecordEditFormLoad}" onsubmit="{!c.saveProcurementClick}">-->
                <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
                    <div class="slds-form">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                
                                <lightning:select aura:id="PRSpecialist_Assignment__c" value="{!v.mCase.PRSpecialist_Assignment__c}" 
                                                  onchange="{!c.onPRSSpecialistAssignmentChange}" name="PRSpecialist_Assignment__c" 
                                                  label="New Patient Outbound" required="false">
                                    <option value="">--None--</option>
                                    <aura:iteration items="{!v.PRSpecialist_AssignmentMap}" var="ind" indexVar="key">
                                        <option text="{!ind.key}" value="{!ind.value}" selected="{!ind.value==v.mCase.PRSpecialist_Assignment__c}" />
                                    </aura:iteration>
                                </lightning:select>
                                
                                <!--<lightning:inputField aura:id="PRSpecialist_Assignment__c" name="PRSpecialist_Assignment__c" fieldName="PRSpecialist_Assignment__c" onchange="{!c.onPRSSpecialistAssignmentChange}" required="false"/>-->
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" aura:id="Date_PRS_Specialist_Is_Assigned__c" label="Date Outbound Assigned" name="Date_PRS_Specialist_Is_Assigned__c"  readonly="true" value="{!v.mCase.Date_PRS_Specialist_Is_Assigned__c}"/>
                            </div>
                        </div>
                    </div>
                    <!-- ***Changes made by vara Date 14-09-2022 ****changes start**moved code from down** -->
                    <div  class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:select aura:id="mPhiReceievedlst" name="mPhiReceievedlst" value = "{!v.mPhiReceievedlstVal}"  label="PHI Received?" onchange="{!c.onPhiValuesChange}" required="false">
                                <option value="">--None--</option>
                                <option value="Yes" >Yes</option>
                                <option value="No" >No</option>
                            </lightning:select>
                        </div>                            
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:select aura:id="mPhiUploadedtoeHealth" name="mPhiUploadedtoeHealth" value = "{!v.mPhiUploadedtoeHealthvVal}"  label="PHI uploaded to eHealth?" onchange="{!c.onConfirmedUploadedeHealthChnage}" required="{!v.mPhiReceievedlstVal == 'Yes'}">
                               
                                    <option value="">--None--</option>
                                    <option value="Yes" >Yes</option>
                                    <option value="No" >No</option>
                               
                            </lightning:select>  
                        </div> 
                    </div>
                    <div  class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <!--<lightning:inputField fieldName="Confirmation_Email_Sent__c"/>-->
                            <lightning:input type="date" aura:id="Confirmation_Email_Sent__c"
                                             label="Confirmation Email Sent"
                                             name="Confirmation_Email_Sent__c"
                                             value="{!v.mCase.Confirmation_Email_Sent__c}"
                                             />
                        </div>
                    </div>
                    <div  class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <!--<lightning:inputField aura:id="mPatienteHealthRecordTemplate" name="eHealth_Record_Template__c" fieldName="eHealth_Record_Template__c"/> -->
                            <lightning:select aura:id="mPatienteHealthRecordTemplate" value="{!v.mCase.eHealth_Record_Template__c}" 
                                              name="eHealth_Record_Template__c" 
                                              label="eHealth Record Template" required="false">
                                <option value="">--None--</option>
                                <aura:iteration items="{!v.eHealth_Record_TemplateMap}" var="ind" indexVar="key">
                                    <option text="{!ind.key}" value="{!ind.value}" selected="{!ind.value==v.mCase.eHealth_Record_Template__c}" />
                                </aura:iteration>
                            </lightning:select>
                        </div>
                    </div>
                    <div  class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:select aura:id="mPatienteHandedofftoeHealth" value="{!v.mCase.Handed_off_to_eHealth__c}" 
                                              name="Handed_off_to_eHealth__c"  onchange="{!c.onPatienteHandedofftoeHealthChange}"
                                              label="Handed off to eHealth" required="false">
                                <option value="">--None--</option>
                                <option value="Yes" >Yes</option>
                                <option value="No" >No</option>
                                <option value="Patient Declined" >Patient Declined</option>
                            </lightning:select>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            
                            <lightning:input type="date" aura:id="mPatienteHealthTemplateSubmitted" label="E-Health Template Submitted" name="E_Health_Template_Submitted__c"  value="{!v.mPatienteHealthTemplateSubmittedVal}"
                                             required="{!v.mCase.Handed_off_to_eHealth__c=='Yes'}"/> 
                        </div>
                    </div>
                    <div  class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <!--<lightning:inputField aura:id="mPatientePathologySlidesNeeded" value="{!v.mPatientePathologySlidesNeededVal}" name="Pathology_Slides_Needed__c" fieldName="Pathology_Slides_Needed__c"  onchange="{!c.onPathologySlidesNeededChange}"/> -->
                            <lightning:select aura:id="mPatientePathologySlidesNeeded" value="{!v.mCase.Pathology_Slides_Needed__c}" 
                                              name="Pathology_Slides_Needed__c"  onchange="{!c.onPathologySlidesNeededChange}"
                                              label="Pathology Slides Needed?" required="false">
                                <option value="">--None--</option>
                                <option value="Yes" >Yes</option>
                                <option value="No" >No</option>
                                
                            </lightning:select>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:input type="date" aura:id="mPatientePathologyReqEntered" name="Pathology_Req_Entered__c" label="Pathology Req Entered" 
                                             value="{!v.mPatientePathologyReqEnteredVal}" required="{!v.mCase.Pathology_Slides_Needed__c=='Yes'}"/> 
                        </div>
                    </div>
                    <div  class="slds-grid slds-wrap">
                  
                        
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                           <!-- <lightning:inputField aura:id="mPatienteRADImagingNeeded" value="{!v.mPatientePathologySlidesNeededVal}" name="RAD_Imaging_Needed__c"   onchange="{!c.onPathologySlidesNeededChange}"/> -->
                            <lightning:select aura:id="mPatienteRADImagingNeeded" value="{!v.mCase.RAD_Imaging_Needed__c}" 
                                              name="RAD_Imaging_Needed__c"  onchange="{!c.onRADImagingNeededChange}"
                                              label="RAD Imaging Needed?" required="false">
                                <option value="">--None--</option>
                                <option value="Yes" >Yes</option>
                                <option value="No" >No</option>
                                
                            </lightning:select>
                        </div>    
                        <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                            <lightning:input type="date" aura:id="mPatienteAncillaryReqEntered" name="Ancillary_Req_Entered__c" label="Ancillary Req Entered"  
                                             value="{!v.mPatienteAncillaryReqEnteredVal}" required="{!v.mCase.RAD_Imaging_Needed__c=='Yes'}"/> 
                        </div>
                    </div>
   
                    <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                        <lightning:input type="checkbox" aura:id="procurementProcessCompleted" label="Procurement Process Completed" name="procurementProcessCompleted"/>
                       <!-- <lightning-input aura:id="procurementProcessCompleted" type="checkbox"> </lightning-input>-->
                    </div>
                </div>   
                <br/>
                <div class="slds-text-align_center">
                    <lightning:button aura:id="Save" label="Save Procurement Information" onclick="{!c.saveProcurementClick}" variant="brand"/> 
                </div>
                <aura:if isTrue="{!v.mLoading}">
                  <!--  <lightning:spinner/>-->
                </aura:if>                
           <!-- </lightning:recordEditForm>-->
        </div>
    </div>	
</aura:component>