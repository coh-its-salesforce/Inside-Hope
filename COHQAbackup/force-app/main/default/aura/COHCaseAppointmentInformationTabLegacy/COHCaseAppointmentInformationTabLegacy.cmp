<aura:component controller="COHCaseInsuranceTabControllerLegacy" implements="flexipage:availableForAllPageTypes,lightning:availableForFlowScreens,force:hasRecordId">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    <aura:attribute name="mLoading" type="Boolean" default="true"/>
    <aura:attribute name="mCase" type="Case" default="{}"/>
    <aura:attribute name="mPatientAppointmentNotOfferedReasons" type="List" default=""/>
    <aura:attribute name="mReachedOutToMDToReschedule" type="List" default=""/>
    <aura:attribute name="mPatientRegisteredVal" type="Boolean" default="false"/>
    <aura:attribute name="mPatientScheduledFirstCallVal" type="Boolean" default="false"/>
    <aura:attribute name="mPatientOfferedAppointmentVal" type="String" default=""/>
    <aura:attribute name="mPatientAppointmentNotOfferedReasonsVal" type="String" default=""/>
    <aura:attribute name="mReachedOutToMDToRescheduleVal" type="String" default=""/>
    <aura:attribute name="mPatientStatusVal" type="String" default=""/>
    <aura:attribute name="mPatientStatus" type="List" default=""/>
    <aura:attribute name="mClinicallyCompletedDeniedReasonVal" type="String" default=""/>
    <aura:attribute name="mCompletedClinicallyDeniedReasons" type="List" default=""/>
    <aura:attribute name="mCurrentCaseOwnerVal" type="String" default=""/>
    <aura:attribute name="mClinicalTeamMembers" type="List" default=""/>
    <aura:attribute name="mMDDeclinedToMoveUpApptVal" type="String" default=""/>
    <aura:attribute name="mMDDeclinedToMoveUpAppt" type="List" default=""/>
    <aura:attribute name="mPatientNeedAuthLOAVal" type="String" default=""/>
    <aura:attribute name="mDisableDisplayPatientRequestSpecificMD" type="Boolean" default="true"/>
    <aura:attribute name="mDisableDisplayPatientOfferedAppointment" type="Boolean" default="true"/>
    <aura:attribute name="mDisableDisplayReasonAppointmentNotOffered" type="Boolean" default="true"/>
    <aura:attribute name="mDisableDisplayReachedOutToMDToReschedule" type="Boolean" default="true"/>
    <aura:attribute name="mPatientRequestSpecificMDVal" type="String" default=""/>
    <!--**** Changes made by sanjay- date : 04-07-2020 ***Start***-->
    <aura:attribute name="videoEmailSent" type="String" default="false"/>
    <!--**** Changes made by sanjay- date : 04-07-2020 ***End***-->
    
    <div class="slds-card slds-card_boundary" style="box-shadow: 0 2px 4px 4px rgba(0, 0, 0, 0.16);">
        <div class="slds-section slds-is-open slds-m-top_none">
            <h3 class="slds-section__title">
                <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
                    <lightning:icon iconName="utility:chevrondown" alternativeText="Open" size="xx-small" class="slds-p-right_x-small"/>
                    <span class="slds-truncate" title="Section Title">Patient Appointment Info</span>
                </button>
            </h3>
            <aura:if isTrue="{!not(v.mLoading)}">
                <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
                    <div class="slds-form">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientRegistered" name="mPatientRegistered" label="Patient Registered?"  required="false" value = "{!v.mPatientRegisteredVal}">
                                    <option value="false" selected="{!not(v.mCase.Patient_Registered__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Patient_Registered__c}">Yes</option>
                                </lightning:select>
                            </div>   
                            <!--Changes made by Sanjay - Date- 04-07-2020 *****START***-->
                            <!--Added button "send Email Video"-->
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label" > </label>
                                    <div class="slds-form-element__control">
                                        <lightning:button variant="brand" label="Send Email Video" title="Send Email Video" onclick="{!c.handleSendEmailVideo}" />
                                        
                                        <lightning:input type="checkbox" label="MyCityofHope.com Email Sent" name="input3" checked="{!v.videoEmailSent}" disabled="true"/>
                                    </div>
                                </div>
                              
                            </div>  
                            <!--Changes made by Sanjay - Date- 04-07-2020 *****END***-->
                            <div class="slds-col slds-size_2-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input name="If_Not_Registered_Explain__c" label="If Not Registered, Explain" value="{!v.mCase.If_Not_Registered_Explain__c}"/>
                            </div>                            
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientScheduledFirstCall" name="mPatientScheduledFirstCall" label="Pt. Scheduled @ 1st Call" required="false" value = "{!v.mPatientScheduledFirstCallVal}">
                                    <option value="false" selected="{!not(v.mCase.Pt_scheduled_1st_Call__c)}">No</option>
                                    <option value="true" selected="{!v.mCase.Pt_scheduled_1st_Call__c}">Yes</option>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_2-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input name="If_Pt_Not_Scheduled_1st_Call_Explain__c" label="If Pt. Not Scheduled @ 1st Call, Explain" value="{!v.mCase.If_Pt_Not_Scheduled_1st_Call_Explain__c}"/>
                            </div>
                        </div>
                        
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientNeedAuthLOA" name="mPatientNeedAuthLOA" label="Does Patient Need Auth/LOA?" required="false" onchange="{!c.onPatientNeedAuthLOAChange}" value="{!v.mPatientNeedAuthLOAVal}">
                                    <option text="--Select Yes or No--" value="" selected="{!v.mPatientNeedAuthLOAVal == ''}"/>
                                    <option value="No" selected="{!v.mPatientNeedAuthLOAVal == 'No'}">No</option>
                                    <option value="Yes" selected="{!v.mPatientNeedAuthLOAVal == 'Yes'}">Yes</option>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientRequestSpecificMD" name="mPatientRequestSpecificMD" label="Is Pt. Requesting A Specific MD?" required="false" disabled="{!v.mDisableDisplayPatientRequestSpecificMD}" value="{!v.mPatientRequestSpecificMDVal }">
                                    <option text="--Select Yes or No--" value="" selected="{!v.mPatientRequestSpecificMDVal == ''}"/>
                                    <option value="No" selected="{!v.mPatientRequestSpecificMDVal == 'No'}">No</option>
                                    <option value="Yes" selected="{!v.mPatientRequestSpecificMDVal == 'Yes'}">Yes</option>
                                </lightning:select>
                            </div>
                        </div>
                        
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientOfferedAppointment" name="mPatientOfferedAppointment" title="Must have sent request in EPIC using smart phrase" label="Patient Scheduled In 7 days?" required="false" disabled="{!v.mDisableDisplayPatientOfferedAppointment}" onchange="{!c.onApptNotOfferedChange}" value="{!v.mPatientOfferedAppointmentVal}">
                                    <option text="--Not Applicable--" value="" selected="{!v.mPatientOfferedAppointmentVal == ''}"/>
                                    <option value="No" selected="{!v.mPatientOfferedAppointmentVal == 'No'}">No</option>
                                    <option value="Yes" selected="{!v.mPatientOfferedAppointmentVal == 'Yes'}">Yes</option>
                                    <option value="Non-FCR" selected="{!v.mPatientOfferedAppointmentVal == 'Non-FCR'}">Non-FCR</option>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientAppointmentNotOfferedReasonsList" name="mPatientAppointmentNotOfferedReasonsList" required="false" disabled="{!v.mDisableDisplayReasonAppointmentNotOffered}" label="Reason MD Is Unable To See Patient In 7 Days" onchange="{!c.onReasonApptNotOfferedChange}" value="{!v.mPatientAppointmentNotOfferedReasonsVal}" >
                                    <option text="--None--" value="" selected="{!v.mPatientAppointmentNotOfferedReasonsVal == null}"/>
                                    <aura:iteration items="{!v.mPatientAppointmentNotOfferedReasons}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Reason_Not_Offered_Appt_Within_2_Days__c == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
						</div>                        
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mReachedOutToMDToReschedule" name="mReachedOutToMDToReschedule" label="Reached out to MD to move up appointment? " disabled="{!v.mDisableDisplayReachedOutToMDToReschedule}" value="{!v.mReachedOutToMDToRescheduleVal}" >
                                    <option text="--Not Applicable--" value="" selected="{!v.mReachedOutToMDToRescheduleVal == ''}"/>
                                    <option value="No" selected="{!v.mReachedOutToMDToRescheduleVal == 'No'}">No</option>
                                    <option value="Yes" selected="{!v.mReachedOutToMDToRescheduleVal == 'Yes'}">Yes</option>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mMDDeclinedToMoveUpAppt" name="mMDDeclinedToMoveUpAppt" label="Did MD decline to move up appointment?"  value="{!v.mMDDeclinedToMoveUpApptVal}" >
                                    <option text="--None--" value="" selected="{!v.mMDDeclinedToMoveUpApptVal == ''}"/>
                                    <aura:iteration items="{!v.mMDDeclinedToMoveUpAppt}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{#v.mCase.Decline_to_move_up_appt__c == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                        </div>

                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mClinicalTeamMembersList" name="mClinicalTeamMembersList" label="Clinical Team Assignment" onchange="{!c.onClinicalTeamMemberAssignedChange}" value="{!v.mCurrentCaseOwnerVal}">
                                    <option text="--None--" value="" selected="{!v.mCurrentCaseOwnerVal == null}"/>
                                    <aura:iteration items="{!v.mClinicalTeamMembers}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{!v.mCurrentCaseOwnerVal == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Date_Nurse_is_assigned__c" label="Date Nurse Is Assigned" readonly="true" value="{!v.mCase.Date_Nurse_is_assigned__c}"/>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mPatientStatusList" name="mPatientStatusList" label="Patient Status" onchange="{!c.onPatientStatusChange}"  value="{!v.mPatientStatusVal}" >
                                    <option text="--None--" value="" selected="{!v.mPatientStatusVal == null}"/>
                                    <aura:iteration items="{!v.mPatientStatus}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{!v.mPatientStatusVal == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:select aura:id="mCompletedClinicallyDeniedList" name="mCompletedClinicallyDeniedList" label="Completed/Clinically Denied Reason" value="{!v.mCase.Completed_Clinically_Denied_Reason__c}">
                                    <option text="--None--" value="" selected="{!v.mClinicallyCompletedDeniedReasonVal == null}"/>
                                    <aura:iteration items="{!v.mCompletedClinicallyDeniedReasons}" var="i">
                                        <option text="{#i.label}" value="{#i.value}" selected="{!v.mClinicallyCompletedDeniedReasonVal == i.value}"/>
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Clinical_Intake_Complete__c" label="Clinical Intake Complete" value="{!v.mCase.Clinical_Intake_Complete__c}"/>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="checkbox" aura:id="mClinicalProcessComplete" name="mClinicalProcessComplete" checked = "{!v.mCase.Clinical_Process_Complete__c}" label="Clinical Process Complete" onchange="{!c.onClinicalProcessCompleteChange}"/>
                            </div>
                        </div>
                         <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Date_Email_Sent_to_MD__c" label="Date Email Sent To MD" value="{!v.mCase.Date_Email_Sent_to_MD__c}"/>
                            </div>
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Date_MD_Response__c" label="MD Response Date" value="{!v.mCase.Date_MD_Response__c}"/>
                            </div>
                        </div>
                         <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Date_MD_Decision__c" label="MD Decision Date" value="{!v.mCase.Date_MD_Decision__c}"/>
                            </div>
                        </div>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size_1-of-2 slds-p-horizontal_medium slds-p-vertical_xx-small">
                                <lightning:input type="datetime" name="Appt_Date_Time__c" label="Appt. Date and Time" value="{!v.mCase.Appt_Date_Time__c}"/>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="slds-text-align_center">
                    <lightning:button aura:id="Save" label="Save Appointment Info" onclick="{!c.saveApptInfoClick}" variant="brand"/>
                </div>
                <aura:set attribute="else">
                    <div style="height: 5rem;">
                        <lightning:spinner/>
                    </div>
                </aura:set>
            </aura:if>
        </div>
    </div>
</aura:component>